---
title: Hub
description: Services.
icon: 'M21 6.5c-1.7 0-3 1.3-3 3v.2l-2 .7c-.6-1.2-1.8-2.1-3.2-2.3V5.9C14 5.6 15 4.4 15 3c0-1.7-1.3-3-3-3S9 1.3 9 3c0 1.4 1 2.6 2.2 2.9v2.2c-1.3.2-2.5 1.1-3.2 2.3l-2-.7v-.2c0-1.7-1.3-3-3-3s-3 1.3-3 3s1.3 3 3 3c1.1 0 2-.6 2.5-1.4l2 .7c-.2 1.3.2 2.7 1.1 3.7l-1.4 1.8c-.4-.2-.8-.3-1.2-.3c-1.7 0-3 1.3-3 3s1.3 3 3 3s3-1.3 3-3c0-.7-.2-1.3-.6-1.8l1.4-1.8c1.4.8 3 .8 4.4 0l1.4 1.8c-.4.5-.6 1.1-.6 1.8c0 1.7 1.3 3 3 3s3-1.3 3-3s-1.3-3-3-3c-.4 0-.9.1-1.2.3l-1.4-1.8c.9-1 1.3-2.4 1.1-3.7l2-.7c.5.8 1.5 1.4 2.5 1.4c1.7 0 3-1.3 3-3s-1.3-3-3-3m-18 4c-.5 0-1-.4-1-1s.5-1 1-1s1 .4 1 1s-.5 1-1 1M6 21c-.6 0-1-.5-1-1s.4-1 1-1s1 .5 1 1s-.4 1-1 1m5-18c0-.5.4-1 1-1s1 .5 1 1s-.4 1-1 1s-1-.5-1-1m1 12c-1.4 0-2.5-1.1-2.5-2.5S10.6 10 12 10s2.5 1.1 2.5 2.5S13.4 15 12 15m6 4c.5 0 1 .5 1 1s-.5 1-1 1s-1-.5-1-1s.5-1 1-1m3-8.5c-.5 0-1-.4-1-1s.5-1 1-1s1 .4 1 1s-.5 1-1 1'
color: '#544ac4'
author: Taufik Nurrohman
type: Markdown
version: 1.0.0
...

This extension provides [RPC](https://en.wikipedia.org/wiki/Remote_procedure_call "Remote Procedure Call · Wikipedia")
functionality, which allows third-party applications to perform
[CRUD](https://en.wikipedia.org/wiki/Create,_read,_update_and_delete "Create, Read, Update, and Delete · Wikipedia")
operations on files and folders in the `.\lot` folder. Additionally, special files such as `.\favicon.ico` and
`.\state.php`, that are located above the `.\lot` folder can be read and edited using more specific routes.

To allow remote operations on the server, the application must be verified as an existing user. This process involves
sending a user’s key and pass to the server for validation. First, the user’s key and pass are sent via a special route
to the server for validation. If the credentials are valid, the server will issue a token that can be used to access
other routes.

Create a user verification form and make it the home page of your application:

~~~ .html
<form method="post">
  <p>
    <input name="key" type="text">
  </p>
  <p>
    <input name="pass" type="password">
  </p>
  <p>
    <button type="submit">
      Verify
    </button>
  </p>
</form>
~~~

Add an event listener to the form to verify the user account. This will allow your application to obtain an access token
that can be used across the entire application:

~~~ .js
const form = document.forms[0];

let accessToken;

form.addEventListener('submit', function (e) {
    let key = this.elements.key.value,
        pass = this.elements.pass.value;
    // Force `@` prefix
    if ('@' !== key[0]) {
        key = '@' + key;
    }
    // Verify user account…
    fetch('/hub/user', {
        method: 'POST',
        headers: { 'content-type': 'application/json' },
        body: JSON.stringify({ key, pass })
    }).then(r => r.json()).then(lot => {
        // Store the access token
        accessToken = lot.token;
        // Redirect to the asset manager page… (for example)
        history.pushState({}, "", '/panel/asset/1');
    }).catch(console.error);
    e.preventDefault();
}, false);
~~~

Unlike signing in through the default user form, the server does not store the user’s credentials. Your application will
use the obtained token to unlock other routes by sending it via the
[`authorization`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Headers/Authorization "Authorization Header · MDN") header.

For example, if you are already on the asset manager page, your application want to list the available asset files and
folders on that page. To do that, you will need to access the route that lists the available files and folders in the
`.\lot\asset` folder:

~~~ .js
fetch('/hub/data?chunk=10&of=asset&part=1', {
    method: 'GET',
    headers: {
        'authorization': 'bearer ' + accessToken,
        'content-type': 'application/json'
    }
}).then(r => r.json()).then(lot => {
    const list = document.createElement('ul');
    lot.data.forEach(v => {
        const listItem = document.createElement('li');
        // …
        list.append(listItem);
    });
    container.replaceChildren(list);
}).catch(console.error);
~~~